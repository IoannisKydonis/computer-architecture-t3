# 3η εργασία Αρχιτεκτονικής Προηγμένων Υπολογιστών
## Συντελεστές (ομάδα 9):
Κυδώνης Ιωάννης, ΑΕΜ: 9407, email: ikydonis@ece.auth.gr  
Ούρδας Αντώνιος, ΑΕΜ: 9358, email: ourdasav@ece.auth.gr

## Βήμα 1

### Ερώτημα 1

Η ισχύς που καταναλώνεται από ένα ολοκληρωμένο κύκλωμα μπορεί να είναι είτε στατική (static ή leakage) είτε δυναμική (dynamic).

Στατική ισχύς (leakage power) είναι εκείνη που καταναλώνεται από τα transistor για να βρίσκονται σε λειτουργία και οφείλεται κυρίως σε διαρροές ρεύματος υποκατωφλίου οπότε παραμένει σχετικά σταθερό<sup>[[1]](#πηγές)</sup>.

Δυναμική ισχύς (dynamic power) είναι αυτή που καταναλώνεται κατά την αλλαγή κατάστασης του transistor.
Όσο δε συμβαίνουν μεταβολές στην κατάσταση των transistors η δυναμική ισχύς που καταναλώνεται είναι μηδενική<sup>[[2]](#πηγές)</sup>.

Τρέχοντας λοιπόν ένα διαφορετικό πρόγραμμα η δυναμική ισχύς (dynamic) μπορεί να είναι διαφορετική, υψηλότερη στην περίπτωση που προκύπτουν περισσότερες εναλλαγές κατάστασης στα transistor του επεξεργαστή και χαμηλότερη αν προκύπτουν λιγότερα. Ένα πιο "βαρύ" πρόγραμμα θα οδηγήσει και σε μεγαλύτερη δυναμική ισχύ.
Αντίθετα, η στατική ισχύς (leakage) θα παραμείνει σταθερή καθώς δεν εξαρτάται από τον αριθμό των εναλλαγών κατάστασης.

Αν θεωρήσουμε ότι το εκτελούμενο πρόγραμμα επιβαρύνει με σταθερό τρόπο τον επεξεργαστή, ο χρόνος εκτέλεσης του προγράμματος δεν παίζει ρόλο καθώς η ισχύς μας δίνει το έργο στη μονάδα του χρόνου.
Αν από την άλλη το εκτελούμενο πρόγραμμα δεν έχει ομοιόμορφη συμπεριφορά στον χρόνο τότε η μέση δυναμική ισχύς που θα προκύψει θα είναι διαφορετική καθώς ο αριθμός των εναλλαγών καταστάσεων στα transistor στη μονάδα του χρόνου δε θα είναι σταθερός.

### Ερώτημα 2

Για να συγκρίνουμε 2 επεξεργαστές ως προς την κατανάλωση ενέργειας που απαιτούν, χρειάζεται να λάβουμε υπόψιν όχι μόνο της ισχύ τους αλλά και το πόσο γρήγορα εκτελούν τις επιθυμητές εντολές.
Η σύγκριση λοιπόν πρέπει να γίνει με βάση την μετρική που δίνει το πηλίκο αριθμού εντολών ανά μονάδα έργου:
```
Efficiency = Instructions / Work

ή

Efficiency = (Instructions / Time) / (Work / Time)

ή

Efficiency = (Instructions / Time) / Power

ή

Efficiency = Instructions / (Time * Power)
```

οπότε για τη συγκεκριμένη περίπτωση όπου Power<sub>1</sub> = 4 W και Power<sub>2</sub> = 40 W έχουμε:

<pre>
Efficiency<sub>1</sub> < Efficiency<sub>2</sub>

ή 

Instructions / (Time<sub>1</sub> * Power<sub>1</sub>) < Instructions / (Time<sub>2</sub> * Power<sub>2</sub>)

ή

Time<sub>1</sub> * Power<sub>1</sub> > Time<sub>2</sub> * Power<sub>2</sub>

ή

Time<sub>2</sub> < Time<sub>1</sub> / 10
</pre>

Αν λοιπόν ο επεξεργαστής με ισχύ 40 W εκτελεί τον επιθυμητό αριθμό εντολών σε χρόνο μικρότερο από το ένα δέκατο του χρόνου που χρειάζεται ο επεξεργαστής των 4 W τότε μπορεί να προσφέρει στο σύστημα μεγαλύτερη διάρκεια μπαταρίας.

### Ερώτημα 3

Εάν η λειτουργία του συστήματος δεν τερματιστεί τότε ακόμα και αν ο επεξεργαστής βρίσκεται σε idle κατάσταση θα καταναλώνει ενέργεια που προσδιορίζεται από τη στατική ισχύ (leakage).

Τα αποτελέσματα που προκύπτουν από την εκτέλεση του McPAT για τον Xeon είναι:
```
Processor: 
  Area = 410.507 mm^2
  Peak Power = 134.938 W
  Total Leakage = 36.8319 W
  Peak Dynamic = 98.1063 W
  Subthreshold Leakage = 35.1632 W
  Subthreshold Leakage with power gating = 16.3977 W
  Gate Leakage = 1.66871 W
  Runtime Dynamic = 72.9199 W
```

και για τον ARM A9 2GHz:
```
Processor: 
  Area = 5.39698 mm^2
  Peak Power = 1.74189 W
  Total Leakage = 0.108687 W
  Peak Dynamic = 1.6332 W
  Subthreshold Leakage = 0.0523094 W
  Gate Leakage = 0.0563774 W
  Runtime Dynamic = 2.96053 W
```

Οπότε θεωρώντας ως χρόνο εκτέλεσης Time<sub>1</sub> τον χρόνο εκτέλεσης του προγράμματος στον Xeon και Time<sub>2</sub> = 40 * Time<sub>1</sub> τον χρόνο εκτέλεσης στον ARM A9 2GHz έχουμε:
<pre>
Energy<sub>1</sub> < Energy<sub>2</sub>

ή

Time<sub>1</sub> * ((Runtime Dynamic)<sub>1</sub> + (Total Leakage)<sub>1</sub>) + (Time<sub>2</sub> - Time<sub>1</sub>) * (Total Leakage)<sub>1</sub> < Time<sub>2</sub> * ((Runtime Dynamic)<sub>2</sub> + (Total Leakage)<sub>2</sub>)

ή

((Runtime Dynamic)<sub>1</sub> + (Total Leakage)<sub>1</sub>) + (39 / 40) * (Total Leakage)<sub>1</sub> < 40 * ((Runtime Dynamic)<sub>2</sub> + (Total Leakage)<sub>2</sub>)

ή

(72.9199 + 36.8319) + (39 / 40) * 36.8319 < 40 * (2.96053 + 0.108687)
(αδύνατο)
</pre>

Παρατηρούμε ότι δεν είναι εφικτό ο Xeon να γίνει πιο energy efficient από τον ARM A9 2GHz κυρίως λόγω της στατικής ισχύος εάν υποθέσουμε ότι τα 2 συστήματα λειτουργούν για τον ίδιο χρόνο.

## Βήμα 2

### Ερώτημα 1

Ακολουθούν τα αποτελέσματα του McPAT για την περίπτωση του bzip:

| Option | Area | Subthreshold Leakage | Gate Leakage | Runtime Dynamic |
| --- | --- | --- | --- | --- |
| cls_128 | 49.4735 | 1.1997795 | .01079706 | .5850353 |
| cls_32 | 11.51330 | .79812864 | .005153027 | .15162696 |
| cls_64 | 14.22863 | 1.10272789 | .007834414 | .3198814 |
| l1da_1 | 14.18885 | 1.10049789 | .007821214 | .3178881 |
| l1da_2 | 14.22863 | 1.10272789 | .007834414 | .3198814 |
| l1da_4 | 13.09206 | .83024989 | .005219104 | .3188939 |
| l1ds_128kB_l1is_128kB | 21.6889 | 2.07033789 | .016342804 | .4179911 |
| l1ds_128kB_l1is_16kB | 16.8292 | 1.37865789 | .010243664 | .417955 |
| l1ds_128kB_l1is_32kB | 16.88353 | 1.38591789 | .010263354 | .4179726 |
| l1ds_128kB_l1is_64kB | 19.2753 | 1.78715789 | .013913904 | .4179818 |
| l1ds_16kB_l1is_128kB | 16.34324 | 1.37865789 | .010243664 | .1055524 |
| l1ds_16kB_l1is_16kB | 11.48356 | .68697589 | .004144534 | .1055521 |
| l1ds_16kB_l1is_32kB | 11.53788 | .69423389 | .004164224 | .1055458 |
| l1ds_16kB_l1is_64kB | 13.9297 | 1.09546789 | .007814734 | .1055497 |
| l1ds_32kB_l1is_128kB | 16.40299 | 1.38591789 | .010263354 | .1046576 |
| l1ds_32kB_l1is_16kB | 11.54331 | .69423389 | .004164224 | .1046490 |
| l1ds_32kB_l1is_32kB | 11.59764 | .70149189 | .004183904 | .1046512 |
| l1ds_32kB_l1is_64kB | 13.98945 | 1.10272789 | .007834414 | .1046591 |
| l1ds_64kB_l1is_128kB | 19.0340 | 1.78715789 | .013913904 | .3199148 |
| l1ds_64kB_l1is_16kB | 14.17431 | 1.09546789 | .007814734 | .3198789 |
| l1ds_64kB_l1is_32kB | 14.22863 | 1.10272789 | .007834414 | .3198814 |
| l1ds_64kB_l1is_64kB | 16.62045 | 1.50396789 | .011484904 | .3199064 |
| l1ia_1 | 14.19542 | 1.10240789 | .007830204 | .319869 |
| l1ia_2 | 14.22863 | 1.10272789 | .007834414 | .3198814 |
| l1ia_4 | 14.99199 | 1.18125789 | .008555664 | .3199022 |
| l2a_1 | 14.70216 | 1.10260747 | .007819346 | .3172754 |
| l2a_2 | 14.91574 | 1.10265773 | .007828933 | .3189831 |
| l2a_4 | 14.91074 | 1.1026776 | .007831068 | .3199502 |
| l2s_1024kB | 11.39063 | 1.10078925 | .007659924 | .3127558 |
| l2s_2048kB | 14.22863 | 1.10272789 | .007834414 | .3198814 |
| l2s_4096kB | 20.54723 | 1.10710636 | .00836659 | .3278003 |
| l2s_512kB | 9.35038 | 1.09948306 | .007464225 | .30503436 |

Ακολουθούν τα αποτελέσματα του McPAT για την περίπτωση του hmmer:

| Option | Area | Subthreshold Leakage | Gate Leakage | Runtime Dynamic |
| --- | --- | --- | --- | --- |
| cls_128 | 49.4735 | 1.1997795 | .01079706 | .5721873 |
| cls_32 | 11.51330 | .79812864 | .005153027 | .18091558 |
| cls_64 | 14.22863 | 1.10272789 | .007834414 | .34330142 |
| l1da_1 | 14.18885 | 1.10049789 | .007821214 | .33654208 |
| l1da_2 | 14.22863 | 1.10272789 | .007834414 | .34330142 |
| l1da_4 | 13.09206 | .83024989 | .005219104 | .34886998 |
| l1ds_128kB_l1is_128kB | 21.6889 | 2.07033789 | .016342804 | .44626822 |
| l1ds_128kB_l1is_16kB | 16.8292 | 1.37865789 | .010243664 | .44619784 |
| l1ds_128kB_l1is_32kB | 16.88353 | 1.38591789 | .010263354 | .44624356 |
| l1ds_128kB_l1is_64kB | 19.2753 | 1.78715789 | .013913904 | .44627031 |
| l1ds_16kB_l1is_128kB | 16.34324 | 1.37865789 | .010243664 | .11267316 |
| l1ds_16kB_l1is_16kB | 11.48356 | .68697589 | .004144534 | .11274866 |
| l1ds_16kB_l1is_32kB | 11.53788 | .69423389 | .004164224 | .11269145 |
| l1ds_16kB_l1is_64kB | 13.9297 | 1.09546789 | .007814734 | .11268959 |
| l1ds_32kB_l1is_128kB | 16.40299 | 1.38591789 | .010263354 | .11395234 |
| l1ds_32kB_l1is_16kB | 11.54331 | .69423389 | .004164224 | .11402863 |
| l1ds_32kB_l1is_32kB | 11.59764 | .70149189 | .004183904 | .11397549 |
| l1ds_32kB_l1is_64kB | 13.98945 | 1.10272789 | .007834414 | .11397002 |
| l1ds_64kB_l1is_128kB | 19.0340 | 1.78715789 | .013913904 | .3433004 |
| l1ds_64kB_l1is_16kB | 14.17431 | 1.09546789 | .007814734 | .3432903 |
| l1ds_64kB_l1is_32kB | 14.22863 | 1.10272789 | .007834414 | .34330142 |
| l1ds_64kB_l1is_64kB | 16.62045 | 1.50396789 | .011484904 | .34331265 |
| l1ia_1 | 14.19542 | 1.10240789 | .007830204 | .34315581 |
| l1ia_2 | 14.22863 | 1.10272789 | .007834414 | .34330142 |
| l1ia_4 | 14.99199 | 1.18125789 | .008555664 | .34330417 |
| l2a_1 | 14.70216 | 1.10260747 | .007819346 | .34321428 |
| l2a_2 | 14.91574 | 1.10265773 | .007828933 | .34326404 |
| l2a_4 | 14.91074 | 1.1026776 | .007831068 | .34326974 |
| l2s_1024kB | 11.39063 | 1.10078925 | .007659924 | .34199221 |
| l2s_2048kB | 14.22863 | 1.10272789 | .007834414 | .34330142 |
| l2s_4096kB | 20.54723 | 1.10710636 | .00836659 | .34480826 |
| l2s_512kB | 9.35038 | 1.09948306 | .007464225 | .34114984 |

Ακολουθούν τα αποτελέσματα του McPAT για την περίπτωση του libm:

| Option | Area | Subthreshold Leakage | Gate Leakage | Runtime Dynamic |
| --- | --- | --- | --- | --- |
| cls_128 | 49.4735 | 1.1997795 | .01079706 | .4603792 |
| cls_32 | 11.51330 | .79812864 | .005153027 | .0792496 |
| cls_64 | 14.22863 | 1.10272789 | .007834414 | .2090385 |
| l1da_1 | 14.18885 | 1.10049789 | .007821214 | .207426 |
| l1da_2 | 14.22863 | 1.10272789 | .007834414 | .2090385 |
| l1da_4 | 13.09206 | .83024989 | .005219104 | .2106345 |
| l1ds_128kB_l1is_128kB | 21.6889 | 2.07033789 | .016342804 | .2676437 |
| l1ds_128kB_l1is_16kB | 16.8292 | 1.37865789 | .010243664 | .2676438 |
| l1ds_128kB_l1is_32kB | 16.88353 | 1.38591789 | .010263354 | .2676315 |
| l1ds_128kB_l1is_64kB | 19.2753 | 1.78715789 | .013913904 | .2676431 |
| l1ds_16kB_l1is_128kB | 16.34324 | 1.37865789 | .010243664 | .0751334 |
| l1ds_16kB_l1is_16kB | 11.48356 | .68697589 | .004144534 | .0751345 |
| l1ds_16kB_l1is_32kB | 11.53788 | .69423389 | .004164224 | .0751319 |
| l1ds_16kB_l1is_64kB | 13.9297 | 1.09546789 | .007814734 | .0751332 |
| l1ds_32kB_l1is_128kB | 16.40299 | 1.38591789 | .010263354 | .0765068 |
| l1ds_32kB_l1is_16kB | 11.54331 | .69423389 | .004164224 | .0765079 |
| l1ds_32kB_l1is_32kB | 11.59764 | .70149189 | .004183904 | .0765031 |
| l1ds_32kB_l1is_64kB | 13.98945 | 1.10272789 | .007834414 | .0765066 |
| l1ds_64kB_l1is_128kB | 19.0340 | 1.78715789 | .013913904 | .2090477 |
| l1ds_64kB_l1is_16kB | 14.17431 | 1.09546789 | .007814734 | .2090478 |
| l1ds_64kB_l1is_32kB | 14.22863 | 1.10272789 | .007834414 | .2090385 |
| l1ds_64kB_l1is_64kB | 16.62045 | 1.50396789 | .011484904 | .2090482 |
| l1ia_1 | 14.19542 | 1.10240789 | .007830204 | .2090472 |
| l1ia_2 | 14.22863 | 1.10272789 | .007834414 | .2090385 |
| l1ia_4 | 14.99199 | 1.18125789 | .008555664 | .209042 |
| l2a_1 | 14.70216 | 1.10260747 | .007819346 | .2086323 |
| l2a_2 | 14.91574 | 1.10265773 | .007828933 | .2088637 |
| l2a_4 | 14.91074 | 1.1026776 | .007831068 | .2088904 |
| l2s_1024kB | 11.39063 | 1.10078925 | .007659924 | .205760 |
| l2s_2048kB | 14.22863 | 1.10272789 | .007834414 | .2090385 |
| l2s_4096kB | 20.54723 | 1.10710636 | .00836659 | .2128647 |
| l2s_512kB | 9.35038 | 1.09948306 | .007464225 | .2036688 |

Ακολουθούν τα αποτελέσματα του McPAT για την περίπτωση του mcf:

| Option | Area | Subthreshold Leakage | Gate Leakage | Runtime Dynamic |
| --- | --- | --- | --- | --- |
| cls_128 | 49.4735 | 1.1997795 | .01079706 | .5813396 |
| cls_32 | 11.51330 | .79812864 | .005153027 | .18194723 |
| cls_64 | 14.22863 | 1.10272789 | .007834414 | .3231574 |
| l1da_1 | 14.18885 | 1.10049789 | .007821214 | .3217718 |
| l1da_2 | 14.22863 | 1.10272789 | .007834414 | .3231574 |
| l1da_4 | 13.09206 | .83024989 | .005219104 | .3288343 |
| l1ds_128kB_l1is_128kB | 21.6889 | 2.07033789 | .016342804 | .43620883 |
| l1ds_128kB_l1is_16kB | 16.8292 | 1.37865789 | .010243664 | .3977849 |
| l1ds_128kB_l1is_32kB | 16.88353 | 1.38591789 | .010263354 | .4105021 |
| l1ds_128kB_l1is_64kB | 19.2753 | 1.78715789 | .013913904 | .43621021 |
| l1ds_16kB_l1is_128kB | 16.34324 | 1.37865789 | .010243664 | .12228883 |
| l1ds_16kB_l1is_16kB | 11.48356 | .68697589 | .004144534 | .1298539 |
| l1ds_16kB_l1is_32kB | 11.53788 | .69423389 | .004164224 | .1258691 |
| l1ds_16kB_l1is_64kB | 13.9297 | 1.09546789 | .007814734 | .12228827 |
| l1ds_32kB_l1is_128kB | 16.40299 | 1.38591789 | .010263354 | .12422504 |
| l1ds_32kB_l1is_16kB | 11.54331 | .69423389 | .004164224 | .1315168 |
| l1ds_32kB_l1is_32kB | 11.59764 | .70149189 | .004183904 | .1276196 |
| l1ds_32kB_l1is_64kB | 13.98945 | 1.10272789 | .007834414 | .12422441 |
| l1ds_64kB_l1is_128kB | 19.0340 | 1.78715789 | .013913904 | .33984726 |
| l1ds_64kB_l1is_16kB | 14.17431 | 1.09546789 | .007814734 | .3155536 |
| l1ds_64kB_l1is_32kB | 14.22863 | 1.10272789 | .007834414 | .3231574 |
| l1ds_64kB_l1is_64kB | 16.62045 | 1.50396789 | .011484904 | .33985768 |
| l1ia_1 | 14.19542 | 1.10240789 | .007830204 | .3143511 |
| l1ia_2 | 14.22863 | 1.10272789 | .007834414 | .3231574 |
| l1ia_4 | 14.99199 | 1.18125789 | .008555664 | .3398592 |
| l2a_1 | 14.70216 | 1.10260747 | .007819346 | .3229061 |
| l2a_2 | 14.91574 | 1.10265773 | .007828933 | .3230756 |
| l2a_4 | 14.91074 | 1.1026776 | .007831068 | .3230929 |
| l2s_1024kB | 11.39063 | 1.10078925 | .007659924 | .31760439 |
| l2s_2048kB | 14.22863 | 1.10272789 | .007834414 | .3231574 |
| l2s_4096kB | 20.54723 | 1.10710636 | .00836659 | .3287798 |
| l2s_512kB | 9.35038 | 1.09948306 | .007464225 | .31383677 |

Ακολουθούν τα αποτελέσματα του McPAT για την περίπτωση του sjeng:

| Option | Area | Subthreshold Leakage | Gate Leakage | Runtime Dynamic |
| --- | --- | --- | --- | --- |
| cls_128 | 49.4735 | 1.1997795 | .01079706 | .3915485 |
| cls_32 | 11.51330 | .79812864 | .005153027 | .0563959 |
| cls_64 | 14.22863 | 1.10272789 | .007834414 | .1572266 |
| l1da_1 | 14.18885 | 1.10049789 | .007821214 | .1567473 |
| l1da_2 | 14.22863 | 1.10272789 | .007834414 | .1572266 |
| l1da_4 | 13.09206 | .83024989 | .005219104 | .1699526 |
| l1ds_128kB_l1is_128kB | 21.6889 | 2.07033789 | .016342804 | .2022617 |
| l1ds_128kB_l1is_16kB | 16.8292 | 1.37865789 | .010243664 | .2022606 |
| l1ds_128kB_l1is_32kB | 16.88353 | 1.38591789 | .010263354 | .2022622 |
| l1ds_128kB_l1is_64kB | 19.2753 | 1.78715789 | .013913904 | .2022618 |
| l1ds_16kB_l1is_128kB | 16.34324 | 1.37865789 | .010243664 | .0612226 |
| l1ds_16kB_l1is_16kB | 11.48356 | .68697589 | .004144534 | .0612061 |
| l1ds_16kB_l1is_32kB | 11.53788 | .69423389 | .004164224 | .0612214 |
| l1ds_16kB_l1is_64kB | 13.9297 | 1.09546789 | .007814734 | .061222 |
| l1ds_32kB_l1is_128kB | 16.40299 | 1.38591789 | .010263354 | .0618211 |
| l1ds_32kB_l1is_16kB | 11.54331 | .69423389 | .004164224 | .0618211 |
| l1ds_32kB_l1is_32kB | 11.59764 | .70149189 | .004183904 | .0618042 |
| l1ds_32kB_l1is_64kB | 13.98945 | 1.10272789 | .007834414 | .0618211 |
| l1ds_64kB_l1is_128kB | 19.0340 | 1.78715789 | .013913904 | .1572699 |
| l1ds_64kB_l1is_16kB | 14.17431 | 1.09546789 | .007814734 | .1572273 |
| l1ds_64kB_l1is_32kB | 14.22863 | 1.10272789 | .007834414 | .1572266 |
| l1ds_64kB_l1is_64kB | 16.62045 | 1.50396789 | .011484904 | .1572701 |
| l1ia_1 | 14.19542 | 1.10240789 | .007830204 | .1572685 |
| l1ia_2 | 14.22863 | 1.10272789 | .007834414 | .1572266 |
| l1ia_4 | 14.99199 | 1.18125789 | .008555664 | .1572692 |
| l2a_1 | 14.70216 | 1.10260747 | .007819346 | .1567451 |
| l2a_2 | 14.91574 | 1.10265773 | .007828933 | .1570462 |
| l2a_4 | 14.91074 | 1.1026776 | .007831068 | .1570791 |
| l2s_1024kB | 11.39063 | 1.10078925 | .007659924 | .1530498 |
| l2s_2048kB | 14.22863 | 1.10272789 | .007834414 | .1572266 |
| l2s_4096kB | 20.54723 | 1.10710636 | .00836659 | .1620828 |
| l2s_512kB | 9.35038 | 1.09948306 | .007464225 | .1503635 |

## Πηγές
[1] [semiengineering.com - Power Consumption: Components of power consumption](https://semiengineering.com/knowledge_centers/low-power/low-power-design/power-consumption/)  
[2] Tarek Darwish, Magdy Bayoumi - The Electrical Engineering Handbook (2005), pp 270-271
